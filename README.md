# ETH Agent with Foundry MCP Integration

A modular Ethereum agent system that uses the Model Context Protocol (MCP) to integrate with Foundry for blockchain interactions.

## How to Build

### Prerequisites
- The `rustc` must be updated to 1.88 or later due to `rig` and `foundry` dependencies

### Build
1. Build the binaries
```bash
cargo build
```
   
2. Setup Environment Variables

Set the following environment variables:

```bash
# Required
export ANTHROPIC_API_KEY="sk-..."  # Required for the agent
export BRAVE_SEARCH_API_KEY="" # Required for search tool
export FOUNDRY_MCP_BINARY="" # The foundry-mcp binary location e.g. "$HOME/eth-agent/target/debug/foundry-mcp"
```

3. Run the agent
```bash
cargo run --bin eth-agent
```

### Working Cases
- What is the ETH balance of Alice
- Send 10 ETH from Alice to Bob
- What is the USDT balance of Eve
- and also web searching related questions

### Still Not Working
- Swap on Uniswap (still not integrated uniswap ABI)
- Not support universal contract call 

## Basic Workflow
The agent sysem is a ReAct agent structure, plan -> execution -> eval 

Workflow:
- Planning agent generate a json based plan with detailed steps
- Sub-agents execute based on the plan
- Eval after each step, if fails (score under threshold) redo the plan with the previous fail reason
- If all steps are executed successfully, return
- After MAX_RETRIES exceeded, stop and exit

Use Claude haiku for all inferences.

Only short-term memories are used.

## Future Works
- Error handling
- Use reasoning model for plan 
- Adjust eval strategies
- Structured output to guarantee a stable output format
- Config file (e.g. `.env`)
- Code agent to complete complicated tasks 
- Introduce RAG for long-term memory and e.g. Uniswap API docs
- Prompt engineering

## Architecture

For detailed information about the ETH Agent's architecture, system design, and technical implementation, see [ARCHITECTURE.md](./ARCHITECTURE.md) (TL;DR, auto generated by Cursor)


## License

MIT License 